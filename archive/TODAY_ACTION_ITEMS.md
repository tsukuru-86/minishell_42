# Phase 2: æ©Ÿèƒ½å®Œæˆåº¦å‘ä¸Š (2025/06/15~)

## ğŸ¯ Phase 1 å®Œäº†å ±å‘Š âœ…

### é”æˆã—ãŸæˆæœ (2025/06/14)
- [x] **SEGFAULTå®Œå…¨è§£æ¶ˆ**: åŸºæœ¬çš„ãªechoã‚³ãƒãƒ³ãƒ‰ç³»ã§100%æˆåŠŸ
- [x] **æ§‹æ–‡ã‚¨ãƒ©ãƒ¼å‡¦ç†ä¿®æ­£**: ä¸æ­£æ§‹æ–‡ã§é©åˆ‡ã«exit status 2ã‚’è¿”ã™
- [x] **ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚¶ãƒ¼å …ç‰¢åŒ–**: `safe_create_token`é–¢æ•°ã®å®Ÿè£…
- [x] **ãƒ¡ãƒ¢ãƒªç®¡ç†å¼·åŒ–**: æ§‹æ–‡ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯è§£æ¶ˆ
- [x] **å…¥åŠ›å‡¦ç†å®‰å…¨æ€§å‘ä¸Š**: NULL/ç©ºæ–‡å­—åˆ—ãƒã‚§ãƒƒã‚¯ã®å¼·åŒ–

---

## ğŸš€ æ¬¡æœŸå„ªå…ˆã‚¿ã‚¹ã‚¯ (Phase 2)

### 1. Heredocæ©Ÿèƒ½ã®å®Œå…¨å®Ÿè£…

#### å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—:
1. **ãƒ‡ãƒªãƒŸã‚¿è§£ææ©Ÿèƒ½** (1-2æ—¥)
   - å¼•ç”¨ç¬¦ä»˜ããƒ‡ãƒªãƒŸã‚¿ã®å‡¦ç†â†’ä¸è¦
   - å¤‰æ•°å±•é–‹ã®è¦å¦åˆ¤å®š

2. **ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†** (2æ—¥)
   - å®‰å…¨ãªä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
   - ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†æ™‚ã®è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

3. **å…¥åŠ›å‡¦ç†ãƒ«ãƒ¼ãƒ—** (2-3æ—¥)
   - è¤‡æ•°è¡Œå…¥åŠ›ã®å‡¦ç†
   - Ctrl-C/Ctrl-Dã‚·ã‚°ãƒŠãƒ«å‡¦ç†

#### å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:
- [`srcs/parser/heredoc.c`](srcs/parser/heredoc.c)
- [`srcs/parser/heredoc_utils.c`](srcs/parser/heredoc_utils.c)
- [`srcs/parser/heredoc_process.c`](srcs/parser/heredoc_process.c)

#### æ¤œè¨¼ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:
```bash
cat << EOF
line1
line2
EOF

cat << DELIMITER
variable expansion: $USER
DELIMITER
```

### 2. Exportæ©Ÿèƒ½ã®é«˜åº¦åŒ– (3-4æ—¥)
**æœªå®Ÿè£…æ©Ÿèƒ½**: `+=` æ¼”ç®—å­ã€è¤‡é›‘ãªã‚¹ãƒšãƒ¼ã‚¹å‡¦ç†

#### å®Ÿè£…é …ç›®:
```c
// += æ¼”ç®—å­ã®å®Ÿè£…
int handle_append_operator(char *name, char *value)
{
    t_env *existing = get_env_node(name);
    if (existing)
        append_to_existing_value(existing, value);
    else
        create_new_env_variable(name, value);
}
```

#### å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:
- [`srcs/builtin/builtin_export_set.c`](srcs/builtin/builtin_export_set.c)
- [`srcs/builtin/builtin_export_utils.c`](srcs/builtin/builtin_export_utils.c)

### 3. ç’°å¢ƒå¤‰æ•°å±•é–‹ã®å¼·åŒ– (3-4æ—¥)
**å•é¡Œ**: æœªå®šç¾©å¤‰æ•°ã®å±•é–‹æ™‚ã®ã‚¹ãƒšãƒ¼ã‚¹å‡¦ç†

#### ä¿®æ­£å†…å®¹:
```c
// ç©ºã®ç’°å¢ƒå¤‰æ•°ã§ã®å¼•æ•°æ¶ˆå¤±å•é¡Œã®ä¿®æ­£
char *expand_env_var(char *var_name)
{
    t_env *env = get_env_node(var_name);
    if (!env)
        return NULL;  // ç©ºæ–‡å­—åˆ—ã§ã¯ãªãNULLã‚’è¿”ã™
    return ft_strdup(env->value);
}
```

#### å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:
- [`srcs/env/env_expand.c`](srcs/env/env_expand.c)
- [`srcs/parser/parser_preprocess.c`](srcs/parser/parser_preprocess.c)

---

## ğŸ¯ Phase 2 æˆåŠŸæŒ‡æ¨™

### æœ€ä½é™é”æˆç›®æ¨™ (Must-Have)
- [ ] Heredoc (`<<`) æ¼”ç®—å­ã®åŸºæœ¬å‹•ä½œ
- [ ] Export `+=` æ¼”ç®—å­ã®å®Ÿè£…
- [ ] ç’°å¢ƒå¤‰æ•°å±•é–‹ã§ã®å¼•æ•°æ¶ˆå¤±å•é¡Œè§£æ¶ˆ

### ç†æƒ³çš„é”æˆç›®æ¨™ (Nice-to-Have)
- [ ] è¤‡é›‘ãªHeredocã‚±ãƒ¼ã‚¹ (å¼•ç”¨ç¬¦ä»˜ããƒ‡ãƒªãƒŸã‚¿)
- [ ] é«˜åº¦ãªExportæ©Ÿèƒ½ (ã‚¹ãƒšãƒ¼ã‚¹å«ã‚€å€¤)
- [ ] ãƒ†ã‚¹ã‚¿ãƒ¼æˆåŠŸç‡70%ä»¥ä¸Šé”æˆ

### æ¸¬å®šæ–¹æ³•
```bash
# Heredocæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
echo 'cat << EOF
test content
EOF' | ./minishell

# Export += ãƒ†ã‚¹ãƒˆ
echo 'export VAR=hello
export VAR+=world
echo $VAR' | ./minishell

# æˆåŠŸç‡æ¸¬å®š
cd minishell_tester && ./tester | grep -E "(OK|KO)" | head -30
```

---

## ğŸ“… ä»Šå¾Œã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Week 1 (6/15-6/21): Phase 2 å®Ÿè£…
- **æœˆæ›œ**: HeredocåŸºæœ¬å®Ÿè£…é–‹å§‹
- **ç«æ›œ**: ãƒ‡ãƒªãƒŸã‚¿è§£æã¨ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- **æ°´æ›œ**: å…¥åŠ›å‡¦ç†ãƒ«ãƒ¼ãƒ—ã¨ã‚·ã‚°ãƒŠãƒ«å‡¦ç†
- **æœ¨æ›œ**: Export += æ¼”ç®—å­å®Ÿè£…
- **é‡‘æ›œ**: ç’°å¢ƒå¤‰æ•°å±•é–‹ä¿®æ­£ãƒ»ãƒ†ã‚¹ãƒˆ

### Week 2 (6/22-6/28): çµ±åˆãƒ†ã‚¹ãƒˆã¨ä¿®æ­£
- **æœˆæ›œ**: å…¨æ©Ÿèƒ½çµ±åˆãƒ†ã‚¹ãƒˆ
- **ç«æ›œ**: ãƒ†ã‚¹ã‚¿ãƒ¼çµæœåˆ†æã¨ä¿®æ­£
- **æ°´æ›œ**: Normæº–æ‹ ã¨ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š
- **æœ¨æ›œ**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- **é‡‘æ›œ**: Phase 2 å®Œäº†ç¢ºèª

### Week 3 (6/29-7/5): Phase 3 æº–å‚™
- **æœˆæ›œ**: Bonusæ©Ÿèƒ½å®Ÿè£…å¯å¦æ¤œè¨
- **ç«æ›œ**: é«˜åº¦bashäº’æ›æ€§èª¿æŸ»
- **æ°´æ›œ**: å®Ÿè£…å„ªå…ˆåº¦æ±ºå®š
- **æœ¨æ›œ**: Phase 3 å®Ÿè£…é–‹å§‹
- **é‡‘æ›œ**: é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨èª¿æ•´

---

## ï¿½ï¸ æ—¥æ¬¡é–‹ç™ºãƒ•ãƒ­ãƒ¼ (æ›´æ–°ç‰ˆ)

### æœã®çŠ¶æ³ç¢ºèª (10åˆ†)
```bash
# å‰æ—¥ã®å¤‰æ›´å†…å®¹ç¢ºèª
git log --oneline -5

# ç¾åœ¨ã®ãƒ“ãƒ«ãƒ‰çŠ¶æ³ç¢ºèª
make re

# åŸºæœ¬å‹•ä½œç¢ºèª
echo 'echo hello' | ./minishell
echo 'pwd' | ./minishell
```

### é–‹ç™ºä¸­ã®ç¢ºèª (å„ä¿®æ­£å¾Œ)
```bash
# ãƒ“ãƒ«ãƒ‰ç¢ºèª
make re

# è©²å½“æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
# (å®Ÿè£…ä¸­ã®æ©Ÿèƒ½ã«å¿œã˜ã¦é©å®œèª¿æ•´)

# ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãƒã‚§ãƒƒã‚¯
echo '[ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰]' | ./minishell 2>&1 | grep -c "LeakSanitizer"
```

### 1æ—¥ã®çµ‚ã‚ã‚Šã®ç¢ºèª (15åˆ†)
```bash
# æœ€çµ‚å‹•ä½œç¢ºèª
echo 'echo hello' | ./minishell
echo 'echo "hello world"' | ./minishell

# ãƒ†ã‚¹ã‚¿ãƒ¼å®Ÿè¡Œ (é€²æ—ç¢ºèª)
cd minishell_tester && ./tester | head -20 && cd ..

# é€²æ—è¨˜éŒ²ã¨ã‚³ãƒŸãƒƒãƒˆ
git add . && git commit -m "[æ—¥ä»˜]: [å®Ÿè£…å†…å®¹]"
```

---

**Phase 1 å®Œäº†**: 2025å¹´6æœˆ14æ—¥ 18:00  
**Phase 2 é–‹å§‹**: 2025å¹´6æœˆ15æ—¥  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼**: 2025å¹´6æœˆ21æ—¥  
**æ‹…å½“**: 42æ±äº¬ minishellé–‹ç™ºãƒãƒ¼ãƒ 